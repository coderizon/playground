@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    color: #0f172a;
  }

  body {
    @apply min-h-screen bg-slate-100 text-slate-900 antialiased;
  }

  h1,
  h2,
  h3 {
    @apply text-slate-900 font-semibold;
  }

  p {
    @apply text-slate-700;
  }

  .eyebrow {
    @apply text-xs font-semibold tracking-[0.2em] uppercase text-slate-500;
  }

  .subline {
    @apply mt-2 text-base text-slate-600 max-w-2xl;
  }
}

@layer components {
  .new-app-root-active {
    @apply min-h-screen bg-slate-100 pb-16;
  }

  #new-app-root > section {
    @apply max-w-6xl mx-auto;
  }

  .primary {
    @apply inline-flex items-center justify-center rounded-xl border border-transparent bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2;
  }

  .primary:not(:disabled):hover {
    @apply bg-indigo-500;
  }

  .primary:disabled {
    @apply opacity-40 cursor-not-allowed;
  }

  .secondary {
    @apply inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-800 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2;
  }

  .secondary:not(:disabled):hover {
    @apply border-indigo-200 text-indigo-700;
  }

  .secondary:disabled {
    @apply opacity-40 cursor-not-allowed;
  }

  .ghost {
    @apply inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2;
  }

  .ghost:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .new-app-home,
  .collect-page,
  .train-page,
  .infer-page {
    @apply mt-10 flex flex-col gap-8 rounded-[32px] bg-white/90 p-8 shadow-xl ring-1 ring-slate-200;
  }

  .new-app-home__header,
  .collect-header,
  .train-header,
  .infer-header {
    @apply flex flex-col gap-6 lg:flex-row lg:items-end lg:justify-between;
  }

  .new-app-home__header h1,
  .collect-header h1,
  .train-header h1,
  .infer-header h1 {
    @apply text-3xl lg:text-4xl;
  }

  .task-grid {
    @apply mt-6 grid gap-6 md:grid-cols-2;
  }

  .task-card {
    @apply relative w-full text-left rounded-2xl border border-slate-200 bg-white/80 p-5 text-slate-800 shadow-sm transition hover:-translate-y-0.5 hover:bg-white hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed;
  }

  .task-card__meta {
    @apply mb-3 flex items-center justify-between text-xs font-semibold uppercase text-slate-500;
  }

  .task-card__body h3 {
    @apply text-xl font-semibold text-slate-900;
  }

  .task-summary {
    @apply mt-4 grid grid-cols-3 gap-3 text-sm text-slate-600;
  }

  .task-summary dt {
    @apply text-xs uppercase text-slate-400;
  }

  .task-card__tags {
    @apply mt-4 flex flex-wrap gap-2;
  }

  .task-tag {
    @apply rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600;
  }

  .task-card__status {
    @apply absolute inset-0 flex items-center justify-center rounded-2xl bg-white/80 text-sm font-semibold text-slate-500;
  }

  .session-state {
    @apply rounded-2xl border border-slate-200 bg-slate-50/70 p-6 shadow-inner;
  }

  .session-controls {
    @apply mt-6 flex flex-wrap gap-3;
  }

  .collect-body,
  .train-body,
  .infer-body {
    @apply flex flex-col gap-8;
  }

  .collect-header__actions,
  .train-header__actions,
  .infer-header__actions {
    @apply flex flex-wrap items-center gap-3;
  }

  .permission-notices {
    @apply flex flex-col gap-3;
  }

  .notice {
    @apply rounded-2xl border px-4 py-3 shadow-sm;
  }

  .notice--warning {
    @apply border-amber-200 bg-amber-50 text-amber-900;
  }

  .notice--info {
    @apply border-sky-200 bg-sky-50 text-sky-900;
  }

  .notice-body {
    @apply flex flex-col gap-1 text-sm;
  }

  .notice-hint {
    @apply text-xs text-slate-500;
  }

  .collect-toolbar {
    @apply flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-5 py-4;
  }

  .collect-lock-hint {
    @apply rounded-xl border border-amber-200 bg-amber-50 px-4 py-2 text-sm text-amber-900;
  }

  .collect-summary-panel {
    @apply grid gap-4 rounded-2xl border border-slate-200 bg-slate-50 p-5 shadow-sm md:grid-cols-[repeat(2,1fr)] lg:grid-cols-[repeat(3,minmax(0,1fr))];
  }

  .summary-item strong {
    @apply text-3xl font-semibold text-slate-900;
  }

  .summary-message {
    @apply text-sm text-slate-600;
  }

  .summary-issues {
    @apply col-span-full mt-3 space-y-2 text-sm text-slate-600;
  }

  .summary-background {
    @apply col-span-full mt-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900;
  }

  .summary-background ul {
    @apply mt-2 space-y-1;
  }

  .summary-background li {
    @apply flex flex-col;
  }

  .collect-class-list {
    @apply grid gap-5 lg:grid-cols-2;
  }

  .class-card-v2 {
    @apply space-y-4 rounded-3xl border border-slate-200 bg-white/90 p-5 shadow-sm transition hover:border-indigo-100;
  }

  .class-card-v2 header {
    @apply flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between;
  }

  .class-name-input {
    @apply w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-base font-medium text-slate-900 shadow-inner focus:border-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-100;
  }

  .dataset-chip {
    @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold uppercase;
  }

  .dataset-chip--ready {
    @apply bg-emerald-100 text-emerald-800;
  }

  .dataset-chip--recording {
    @apply bg-amber-100 text-amber-800;
  }

  .dataset-chip--error {
    @apply bg-red-100 text-red-800;
  }

  .dataset-summary {
    @apply text-sm text-slate-500;
  }

  .dataset-recorder {
    @apply flex flex-col gap-4 rounded-2xl border border-slate-100 bg-slate-50/80 p-4 outline-none;
  }

  .dataset-recorder:focus-visible {
    @apply ring-2 ring-indigo-200;
  }

  .dataset-preview {
    @apply relative flex min-h-[180px] items-center justify-center overflow-hidden rounded-2xl border border-slate-200 bg-slate-900 text-white;
  }

  .dataset-preview video {
    @apply h-full w-full object-cover;
  }

  .preview-placeholder {
    @apply text-center text-sm text-white/70;
  }

  .camera-guidance {
    @apply flex h-full w-full flex-col items-center justify-center gap-3 px-3 text-center text-sm text-white/80;
  }

  .audio-preview {
    @apply flex flex-col gap-3 rounded-xl border border-slate-200 bg-slate-900/80 p-4 text-white;
  }

  .audio-preset-hint {
    @apply mt-4 space-y-2 text-sm text-slate-600;
  }

  .audio-meter {
    @apply h-2 w-full rounded-full bg-white/20;
  }

  .audio-meter.is-active {
    @apply bg-gradient-to-r from-indigo-400 via-sky-400 to-emerald-400;
  }

  .audio-guidance p {
    @apply text-sm text-white;
  }

  .audio-progress-bar {
    @apply mt-2 h-1.5 w-full rounded-full bg-white/20;
  }

  .audio-progress-fill {
    @apply h-full rounded-full bg-white;
  }

  .audio-background-pill {
    @apply flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-900;
  }

  .audio-background-pill.is-missing {
    @apply border-amber-200 bg-amber-50 text-amber-900;
  }

  .audio-background-status {
    @apply text-xs text-inherit;
  }

  .ghost--tiny {
    @apply px-2 py-1 text-xs;
  }

  .dataset-hotkeys {
    @apply flex flex-wrap gap-3 text-xs text-slate-500;
  }

  .dataset-hotkeys kbd {
    @apply rounded-md border border-slate-300 bg-white px-2 py-0.5 font-semibold;
  }

  .inference-hotkeys {
    @apply flex flex-wrap gap-3 text-xs text-slate-500;
  }

  .inference-hotkeys kbd {
    @apply rounded-md border border-slate-300 bg-white px-2 py-0.5 font-semibold;
  }

  .permission-retry {
    @apply flex items-center gap-3 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-900;
  }

  .field-error {
    @apply text-sm text-red-600;
  }

  .dataset-hint {
    @apply text-sm text-slate-600;
  }

  .sample-list {
    @apply border-t border-slate-200 pt-4;
  }

  .sample-list ul {
    @apply flex flex-col gap-3;
  }

  .sample-list li {
    @apply flex items-center justify-between gap-4 rounded-2xl border border-slate-200 bg-white px-3 py-2;
  }

  .sample-meta {
    @apply flex flex-1 items-center gap-4;
  }

  .sample-details {
    @apply flex flex-col gap-1 text-sm text-slate-600;
  }

  .sample-visual {
    @apply flex flex-col items-center gap-2;
  }

  .sample-thumb {
    @apply h-16 w-20 rounded-lg object-cover;
  }

  .sample-meta-info {
    @apply flex flex-wrap gap-2 text-xs uppercase tracking-wide text-slate-400;
  }

  .sample-scrub {
    @apply flex w-full flex-col items-center gap-1 text-[11px] text-slate-500;
  }

  .sample-scrub-slider {
    @apply h-2 w-28 appearance-none rounded-full bg-slate-200 accent-indigo-500;
  }

  .sample-scrub-label {
    @apply text-xs font-medium text-slate-600;
  }

  .sample-annotation-input {
    @apply mt-1 w-full rounded-lg border border-slate-200 px-2 py-1 text-sm shadow-inner focus:border-indigo-200 focus:outline-none;
  }

  .sample-annotation-counter {
    @apply mt-1 text-right text-[11px] text-slate-400;
  }

  .sample-analytics {
    @apply mt-4 text-sm text-slate-600;
  }

  .warning-chip {
    @apply ml-3 inline-flex items-center rounded-full bg-amber-100 px-3 py-0.5 text-xs font-semibold text-amber-900;
  }

  .class-card-actions {
    @apply flex flex-wrap gap-3;
  }

  .train-body {
    @apply grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(260px,1fr)];
  }

  .training-panel,
  .inference-panel {
    @apply space-y-5 rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm;
  }

  .training-progress {
    @apply flex items-center gap-3;
  }

  .training-progress-bar {
    @apply h-2 flex-1 rounded-full bg-slate-200;
  }

  .training-progress-fill {
    @apply h-full rounded-full bg-indigo-500;
  }

  .training-actions {
    @apply flex flex-wrap gap-3;
  }

  .training-hotkeys {
    @apply flex flex-wrap gap-3 text-xs text-slate-500;
  }

  .training-hotkeys kbd {
    @apply rounded-md border border-slate-300 bg-white px-2 py-0.5 font-semibold;
  }

  .training-meta {
    @apply rounded-2xl bg-slate-50 p-4 text-sm text-slate-600;
  }

  .training-summary {
    @apply rounded-3xl border border-slate-100 bg-slate-50 p-6 shadow-inner space-y-3;
  }

  .training-issues ul {
    @apply mt-2 space-y-2 text-sm text-slate-600;
  }

  .training-issues--background {
    @apply border border-amber-200 bg-amber-50 text-amber-900 rounded-2xl p-4;
  }

  .training-issues--background ul {
    @apply text-amber-900;
  }

  .infer-body {
    @apply space-y-6;
  }

  .inference-status,
  .prediction-status,
  .edge-status,
  .edge-streaming-hint {
    @apply text-sm text-slate-600;
  }

  .inference-video {
    @apply overflow-hidden rounded-3xl border border-slate-200 bg-slate-900;
  }

  .inference-video video {
    @apply block h-[320px] w-full object-cover opacity-70 transition;
  }

  .inference-video video.is-active {
    @apply opacity-100;
  }

  .inference-actions {
    @apply flex flex-wrap gap-3;
  }

  .prediction-output {
    @apply rounded-2xl border border-slate-100 bg-slate-50 p-4;
  }

  .prediction-output ul {
    @apply mt-3 space-y-2;
  }

  .prediction-output li {
    @apply flex items-center justify-between rounded-xl bg-white px-3 py-2 text-sm text-slate-700;
  }

  .prediction-output li.is-active {
    @apply border border-indigo-200 bg-indigo-50 text-indigo-900;
  }

  .edge-panel {
    @apply rounded-2xl border border-slate-200 bg-slate-50 p-4 space-y-3;
  }

  .edge-inline-controls {
    @apply flex flex-wrap items-center gap-3;
  }

  .stream-toggle {
    @apply inline-flex items-center gap-2 text-sm text-slate-700;
  }

  .edge-error {
    @apply text-sm text-red-600;
  }

  .ble-modal-backdrop {
    @apply fixed inset-0 z-40 bg-slate-900/60;
  }

  .ble-modal {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
  }

  .ble-modal-shell {
    @apply w-full max-w-3xl rounded-3xl border border-slate-200 bg-white p-6 shadow-2xl;
  }

  .ble-modal-header {
    @apply mb-4 flex items-center justify-between;
  }

  .icon-close {
    @apply h-8 w-8 rounded-full bg-slate-100 text-2xl leading-none text-slate-600 transition hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500;
  }

  .ble-device-list {
    @apply grid gap-4 md:grid-cols-2;
  }

  .ble-device {
    @apply flex h-full w-full flex-col gap-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-left transition hover:border-indigo-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500;
  }

  .ble-device.is-connected {
    @apply border-indigo-300 bg-indigo-50;
  }

  .ble-device-info {
    @apply flex items-center justify-between text-sm font-semibold text-slate-800;
  }

  .ble-device-instructions {
    @apply text-sm text-slate-600;
  }

  .ble-device-instructions ul {
    @apply list-disc pl-4 text-xs text-slate-500;
  }

  .ble-modal-error {
    @apply mb-3 rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700;
  }

  .stream-toggle input {
    @apply h-4 w-4 rounded border-slate-300 text-indigo-600;
  }

  .confirm-backdrop {
    @apply fixed inset-0 z-40 flex items-center justify-center bg-slate-900/60 p-4;
  }

  .confirm-dialog {
    @apply w-full max-w-md rounded-3xl border border-slate-200 bg-white p-6 shadow-2xl;
  }

  .confirm-dialog.is-destructive {
    @apply border-red-200;
  }

  .confirm-actions {
    @apply mt-6 flex justify-end gap-3;
  }

  .toast-root {
    @apply pointer-events-none fixed inset-0 z-50 flex items-start justify-center p-4;
  }

  .toast-center {
    @apply flex w-full max-w-sm flex-col gap-3;
  }

  .toast {
    @apply pointer-events-auto rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-800 shadow-xl;
  }

  .toast--warning {
    @apply border-amber-200 bg-amber-50 text-amber-900;
  }

  .toast--error {
    @apply border-red-200 bg-red-50 text-red-800;
  }

  .toast-close {
    @apply ml-auto text-lg text-slate-500 transition hover:text-slate-800;
  }
}
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
