@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    color: #0f172a;
  }

  body {
    @apply min-h-screen bg-slate-100 text-slate-900 antialiased;
  }

  h1,
  h2,
  h3 {
    @apply text-slate-900 font-semibold;
  }

  p {
    @apply text-slate-700;
  }

  .eyebrow {
    @apply text-xs font-semibold tracking-[0.2em] uppercase text-slate-500;
  }

  .subline {
    @apply mt-2 text-base text-slate-600 max-w-2xl;
  }
}

@layer components {
  .new-app-root-active {
    @apply min-h-screen bg-slate-100;
  }

  #new-app-root > section {
    @apply min-h-screen w-full;
  }

  .primary {
    @apply inline-flex items-center justify-center rounded-xl border border-transparent bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2;
  }

  .primary:not(:disabled):hover {
    @apply bg-indigo-500;
  }

  .primary:disabled {
    @apply opacity-40 cursor-not-allowed;
  }

  .secondary {
    @apply inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-800 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2;
  }

  .secondary:not(:disabled):hover {
    @apply border-indigo-200 text-indigo-700;
  }

  .secondary:disabled {
    @apply opacity-40 cursor-not-allowed;
  }

  .ghost {
    @apply inline-flex items-center justify-center rounded-xl px-3 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2;
  }

  .ghost:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .ghost.danger {
    @apply text-red-600 hover:bg-red-50;
  }

  .ghost.warning {
    @apply text-amber-600 hover:bg-amber-50;
  }

  .new-app-home,
  .collect-page,
  .train-page,
  .infer-page {
    @apply mt-0 flex min-h-screen flex-col gap-8 rounded-none border-0 bg-white p-8 shadow-none ring-0;
  }

  .new-app-home__header,
  .collect-header,
  .train-header,
  .infer-header {
    @apply flex flex-col gap-6 lg:flex-row lg:items-end lg:justify-between;
  }

  .new-app-home__header h1,
  .collect-header h1,
  .train-header h1,
  .infer-header h1 {
    @apply text-3xl lg:text-4xl;
  }

  .home-hero {
    @apply flex flex-col gap-6;
  }

  .home-journey {
    @apply grid gap-3 rounded-2xl border border-slate-200 bg-white/60 p-4 text-sm text-slate-600 shadow-inner md:grid-cols-2;
  }

  .home-journey__item {
    @apply flex gap-3 rounded-2xl border border-transparent p-3 transition-colors hover:border-indigo-100;
  }

  .home-journey__index {
    @apply h-9 w-9 rounded-full bg-indigo-100 text-center text-base font-semibold text-indigo-700 leading-9;
  }

  .home-journey__step {
    @apply text-xs font-semibold uppercase tracking-wide text-slate-400;
  }

  .home-journey__title {
    @apply text-base font-semibold text-slate-900;
  }

  .home-journey__description {
    @apply text-sm text-slate-600;
  }

  .home-guardrails {
    @apply flex w-full max-w-sm flex-col gap-4 rounded-2xl border border-slate-200 bg-slate-50/80 p-5 shadow-inner;
  }

  .home-guardrails__copy {
    @apply text-sm text-slate-700;
  }

  .home-guardrails__list {
    @apply flex flex-col gap-3;
  }

  .home-guardrails__list li {
    @apply flex gap-3 text-sm text-slate-600;
  }

  .home-guardrails__bullet {
    @apply mt-1 h-2 w-2 rounded-full bg-indigo-500;
  }

  .home-main {
    @apply grid gap-6;
  }

  .home-grid-panel {
    @apply flex flex-col gap-4;
  }

  .task-grid-instructions {
    @apply text-sm text-slate-600;
  }

  .task-grid {
    @apply mt-6 grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5;
  }

  .task-card {
    @apply flex flex-col justify-start relative w-full text-left rounded-2xl border border-slate-200 bg-white/80 text-slate-800 shadow-sm transition hover:-translate-y-0.5 hover:bg-white hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed;
  }

  .task-card__hero {
    @apply aspect-[3/2] w-full overflow-hidden rounded-t-2xl bg-slate-100;
  }

  .task-card__hero img {
    @apply h-full w-full object-cover;
  }

  .task-card__content {
    @apply p-5;
  }

  .task-card__meta {
    @apply mb-3 flex items-center justify-between text-xs font-semibold uppercase text-slate-500;
  }

  .task-card__body h3 {
    @apply text-xl font-semibold text-slate-900;
  }

  .task-summary {
    @apply mt-4 grid grid-cols-3 gap-3 text-sm text-slate-600;
  }

  .task-summary dt {
    @apply text-xs uppercase text-slate-400;
  }

  .task-card__tags {
    @apply mt-4 flex flex-wrap gap-2;
  }

  .task-tag {
    @apply rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600;
  }

  .task-card__status {
    @apply absolute inset-0 flex items-center justify-center rounded-2xl bg-white/80 text-sm font-semibold text-slate-500;
  }

  .session-state {
    @apply rounded-2xl border border-slate-200 bg-slate-50/70 p-6 shadow-inner;
  }

  .session-controls {
    @apply mt-6 flex flex-wrap gap-3;
  }

  .collect-body,
  .train-body,
  .infer-body {
    @apply flex flex-col gap-8;
  }

  .collect-context {
    @apply flex flex-col gap-5 rounded-3xl bg-white p-6 shadow-lg shadow-slate-200/60;
    @apply md:sticky md:top-0 md:z-20 md:bg-white/95 md:backdrop-blur;
  }

  .collect-body {
    @apply mt-6;
  }

  .collect-header__actions,
  .train-header__actions,
  .infer-header__actions {
    @apply flex flex-wrap items-center gap-3;
  }

  .permission-notices {
    @apply flex flex-col gap-3;
  }

  .notice {
    @apply rounded-2xl border px-4 py-3 shadow-sm;
  }

  .notice--warning {
    @apply border-amber-200 bg-amber-50 text-amber-900;
  }

  .notice--info {
    @apply border-sky-200 bg-sky-50 text-sky-900;
  }

  .notice-body {
    @apply flex flex-col gap-1 text-sm;
  }

  .notice-hint {
    @apply text-xs text-slate-500;
  }

  .collect-toolbar {
    @apply flex flex-col gap-4 rounded-2xl border border-slate-200 bg-slate-50 px-5 py-4;
  }

  .collect-mobile-toolbar {
    @apply sticky bottom-0 z-30 mt-6 flex flex-col gap-4 rounded-2xl border border-slate-200 bg-white/95 p-4 shadow-lg shadow-slate-300/50 backdrop-blur md:hidden;
  }

  .collect-mobile-stats {
    @apply grid grid-cols-3 gap-3 text-center text-sm text-slate-500;
  }

  .collect-mobile-stats strong {
    @apply block text-xl font-semibold text-slate-900;
  }

  .collect-mobile-actions {
    @apply flex flex-col gap-3;
  }

  .collect-toolbar-grid {
    @apply flex flex-col gap-4 md:flex-row md:items-center md:justify-between;
  }

  .collect-toolbar-grid > button {
    @apply md:w-auto;
  }

  .collect-metric-grid {
    @apply grid flex-1 grid-cols-1 gap-4 md:grid-cols-3 md:max-w-[480px];
  }

  .collect-metric {
    @apply text-sm text-slate-600;
  }

  .collect-metric strong {
    @apply text-2xl font-semibold text-slate-900;
  }

  .collect-empty {
    @apply flex flex-col gap-4 rounded-3xl border border-dashed border-slate-300 bg-white/80 p-6 text-slate-700 shadow-inner;
  }

  .collect-empty ul {
    @apply list-disc space-y-1 pl-5 text-sm text-slate-600;
  }

  .landing-shell {
    @apply mx-auto flex min-h-screen flex-col gap-6 px-6 py-10 text-slate-900 lg:max-w-5xl lg:px-8;
  }

  .landing-header {
    @apply flex items-center justify-between;
  }

  .landing-identity {
    @apply flex items-center gap-3 text-4xl font-semibold text-slate-900;
  }

  .identity-logo {
    @apply h-10 w-10;
  }

  .search-pill {
    @apply inline-flex items-center gap-3 rounded-full border border-slate-200 bg-white px-5 py-3 text-sm font-semibold text-slate-700 shadow-sm transition hover:border-indigo-200 hover:text-indigo-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2;
  }

  .model-marquee {
    @apply mt-6 overflow-hidden rounded-[32px] border border-slate-200 bg-white p-6 shadow-xl;
  }

  .model-track {
    @apply flex animate-[marquee_60s_linear_infinite] gap-6;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .model-card {
    @apply flex min-w-[260px] flex-col gap-4 rounded-3xl border border-slate-200 bg-white/95 p-5 text-left shadow-sm transition hover:border-indigo-200 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500;
  }

  .model-card.has-hero .model-card-hero {
    @apply overflow-hidden rounded-2xl bg-slate-100;
  }

  .model-card-hero img {
    @apply h-40 w-full object-cover;
  }

  .model-card-body h3 {
    @apply text-lg font-semibold text-slate-900;
  }

  .model-card-description {
    @apply text-sm text-slate-600;
  }

  .model-card-actions {
    @apply mt-2 flex flex-wrap gap-2 text-xs font-semibold uppercase text-slate-500;
  }

  .md-tag {
    @apply rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600;
  }

  .md-tag.primary {
    @apply bg-indigo-100 text-indigo-700;
  }

  .model-card.is-disabled {
    @apply opacity-40;
  }

  .side-menu-backdrop {
    @apply fixed inset-0 bg-slate-900/70 backdrop-blur-sm;
  }

  .side-menu {
    @apply fixed left-0 top-0 h-full w-72 translate-x-[-100%] bg-white p-6 shadow-2xl transition;
  }

  .side-menu:not(.hidden) {
    @apply translate-x-0;
  }

  .side-menu-item {
    @apply flex w-full items-center gap-3 rounded-xl px-4 py-3 text-left text-sm font-semibold text-slate-700 transition hover:bg-slate-100;
  }

  .collect-lock-hint {
    @apply rounded-xl border border-amber-200 bg-amber-50 px-4 py-2 text-sm text-amber-900;
  }

  .collect-floating-toolbar {
    @apply pointer-events-none fixed bottom-6 right-6 z-[60] flex flex-col items-end gap-3;
  }

  .collect-floating-toggle {
    @apply pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full border border-slate-300 bg-white text-lg font-semibold text-slate-500 shadow-lg shadow-slate-900/15 transition;
  }

  .collect-floating-toggle:disabled {
    @apply cursor-not-allowed opacity-40;
  }

  .collect-floating-toggle.is-active {
    @apply border-amber-400 text-amber-600;
  }

  .collect-floating-hints {
    @apply pointer-events-auto flex max-w-sm flex-col gap-3;
    width: min(320px, calc(100% - 3rem));
  }

  @media (max-width: 640px) {
    .collect-floating-toolbar {
      left: 1rem;
      right: 1rem;
      align-items: flex-end;
    }

    .collect-floating-hints {
      width: auto;
    }
  }

  .collect-summary-inline {
    @apply grid gap-4 md:grid-cols-2;
  }

  .summary-item strong {
    @apply text-3xl font-semibold text-slate-900;
  }

  .summary-message {
    @apply text-sm text-slate-600;
  }

  .summary-issues {
    @apply col-span-full mt-3 space-y-2 text-sm text-slate-600;
  }

  .summary-background {
    @apply col-span-full mt-3 rounded-2xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900;
  }

  .summary-background ul {
    @apply mt-2 space-y-1;
  }

  .summary-background li {
    @apply flex flex-col;
  }

  .collect-class-list {
    @apply grid gap-5 md:grid-cols-2 xl:grid-cols-4;
  }

  .class-card-v2 {
    @apply space-y-4 rounded-3xl border border-slate-200 p-5 shadow-sm transition hover:border-indigo-100;
  }

  .class-card-v2--neutral {
    @apply bg-white;
  }

  .class-card-v2--ready {
    @apply bg-emerald-50/60;
  }

  .class-card-v2--recording {
    @apply bg-amber-50/60;
  }

  .class-card-v2--error {
    @apply bg-red-50/60;
  }

  .class-card-v2 header {
    @apply flex flex-col gap-3;
  }

  .class-card-header-main {
    @apply flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between;
  }

  .class-card-header-actions {
    @apply flex justify-end;
  }

  .class-name-input {
    @apply w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-base font-medium text-slate-900 shadow-inner focus:border-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-100;
  }

  .dataset-chip {
    @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold uppercase;
  }

  .dataset-chip--ready {
    @apply bg-emerald-100 text-emerald-800;
  }

  .dataset-chip--recording {
    @apply bg-amber-100 text-amber-800;
  }

  .dataset-chip--neutral {
    @apply bg-slate-100 text-slate-600;
  }

  .dataset-chip--error {
    @apply bg-red-100 text-red-800;
  }

  .dataset-summary {
    @apply text-sm text-slate-500;
  }

  .dataset-summary-error {
    @apply text-sm text-red-500;
  }

  .dataset-recorder {
    @apply flex flex-col gap-3 rounded-2xl border border-slate-100 bg-slate-50/80 p-4 outline-none md:gap-4;
  }

  .dataset-recorder:focus-visible {
    @apply ring-2 ring-indigo-200;
  }

  .dataset-preview {
    @apply relative flex min-h-[180px] items-center justify-center overflow-hidden rounded-2xl border border-slate-200 bg-slate-900 text-white;
  }

  .dataset-preview:not(.is-audio) {
    @apply aspect-[4/3];
  }

  .dataset-preview .preview-video {
    @apply absolute inset-0 h-full w-full object-cover opacity-0 transition-opacity duration-300;
  }

  .dataset-preview .preview-video.is-mirrored {
    transform: scaleX(-1);
  }

  .preview-video.is-visible {
    @apply opacity-100;
  }

  .preview-placeholder {
    @apply text-center text-sm text-white/70;
  }

  .camera-guidance {
    @apply flex h-full w-full flex-col items-center justify-center gap-3 px-3 text-center text-sm text-white/80;
  }

  .recording-hint {
    @apply text-center text-sm text-slate-600;
  }

  .audio-preview {
    @apply flex flex-col gap-3 rounded-xl border border-slate-200 bg-slate-900/80 p-4 text-white;
  }

  .audio-preset-hint {
    @apply mt-4 space-y-2 text-sm text-slate-600;
  }

  .audio-meter {
    @apply h-2 w-full rounded-full bg-white/20;
  }

  .audio-meter.is-active {
    @apply bg-gradient-to-r from-indigo-400 via-sky-400 to-emerald-400;
  }

  .audio-guidance p {
    @apply text-sm text-white;
  }

  .audio-progress-bar {
    @apply mt-2 h-1.5 w-full rounded-full bg-white/20;
  }

  .audio-progress-fill {
    @apply h-full rounded-full bg-white;
  }

  .audio-background-pill {
    @apply flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-900;
  }

  .audio-background-pill.is-missing {
    @apply border-amber-200 bg-amber-50 text-amber-900;
  }

  .audio-background-status {
    @apply text-xs text-inherit;
  }

  .ghost--tiny {
    @apply px-2 py-1 text-xs;
  }

  .dataset-hotkeys {
    @apply flex flex-wrap gap-3 text-xs text-slate-500;
  }

  .dataset-hotkeys kbd {
    @apply rounded-md border border-slate-300 bg-white px-2 py-0.5 font-semibold;
  }

  .inference-hotkeys {
    @apply flex flex-wrap gap-3 text-xs text-slate-500;
  }

  .inference-hotkeys kbd {
    @apply rounded-md border border-slate-300 bg-white px-2 py-0.5 font-semibold;
  }

  .permission-retry {
    @apply flex items-center gap-3 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-900;
  }

  .field-error {
    @apply text-sm text-red-600;
  }

  .dataset-hint {
    @apply text-sm text-slate-600;
  }

  .sample-album {
    @apply mt-2 flex flex-col gap-4 rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm md:mt-4;
  }

  .sample-album-header {
    @apply flex items-center justify-between gap-3;
  }

  .sample-album-trigger {
    @apply flex w-full items-center gap-4 text-left;
  }

  .sample-album-stack {
    @apply relative h-20 w-28 md:h-24 md:w-32;
  }

  .sample-album-card {
    @apply absolute inset-0 rounded-2xl border border-white bg-slate-100 shadow-lg shadow-slate-900/20;
  }

  .sample-album-card img {
    @apply h-full w-full rounded-2xl object-cover;
  }

  .sample-album-card-latest {
    @apply z-10;
  }

  .sample-album-placeholder {
    @apply flex h-full w-full items-center justify-start rounded-xl bg-slate-100 px-3 text-[11px] font-semibold uppercase tracking-widest text-slate-400;
  }

  .sample-album-summary {
    @apply flex flex-col text-left text-xs text-slate-500;
  }

  .sample-album-summary strong {
    @apply text-lg font-semibold text-slate-900;
  }

  .sample-modal-backdrop {
    @apply fixed inset-0 z-40 bg-slate-900/60;
  }

  .sample-modal {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
  }

  .sample-modal-shell {
    @apply w-full max-w-3xl space-y-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-2xl;
  }

  .sample-modal-header {
    @apply flex items-start justify-between gap-4;
  }

  .sample-modal-subline {
    @apply text-sm text-slate-500;
  }

  .sample-modal-actions {
    @apply flex flex-wrap items-center gap-3;
  }

  .sample-modal-list {
    @apply flex max-h-[60vh] flex-col gap-3 overflow-y-auto pr-2;
  }

  .sample-modal-list li {
    @apply flex items-center justify-between gap-4 rounded-2xl border border-slate-200 bg-white px-3 py-2;
  }

  .sample-modal-empty {
    @apply rounded-2xl border border-slate-200 bg-slate-50 p-6 text-center text-sm text-slate-500;
  }

  .sample-modal-empty-title {
    @apply text-base font-semibold text-slate-700;
  }

  .sample-meta {
    @apply flex flex-1 items-center gap-4;
  }

  .sample-select-checkbox {
    @apply mr-2 flex items-center;
  }

  .sample-select-checkbox input {
    @apply h-4 w-4 rounded border-slate-300 text-indigo-600;
  }

  .sample-selectable {
    @apply border border-transparent;
  }

  .sample-selectable.is-selected {
    @apply border-indigo-200 bg-indigo-50;
  }

  .sample-details {
    @apply flex flex-col gap-1 text-sm text-slate-600;
  }

  .sample-visual {
    @apply flex flex-col items-center gap-2;
  }

  .sample-thumb {
    @apply h-16 w-20 rounded-lg object-cover;
  }

  .sample-meta-info {
    @apply flex flex-wrap gap-2 text-xs uppercase tracking-wide text-slate-400;
  }

  .sample-scrub {
    @apply flex w-full flex-col items-center gap-1 text-[11px] text-slate-500;
  }

  .sample-scrub-slider {
    @apply h-2 w-28 appearance-none rounded-full bg-slate-200 accent-indigo-500;
  }

  .sample-scrub-label {
    @apply text-xs font-medium text-slate-600;
  }

  .sample-annotation-input {
    @apply mt-1 w-full rounded-lg border border-slate-200 px-2 py-1 text-sm shadow-inner focus:border-indigo-200 focus:outline-none;
  }

  .sample-annotation-counter {
    @apply mt-1 text-right text-[11px] text-slate-400;
  }

  .sample-analytics {
    @apply mt-4 text-sm text-slate-600;
  }

  .warning-chip {
    @apply ml-3 inline-flex items-center rounded-full bg-amber-100 px-3 py-0.5 text-xs font-semibold text-amber-900;
  }

  .class-card-actions {
    @apply flex flex-wrap gap-3;
  }

  .record-btn {
    @apply relative flex w-full items-center justify-center gap-3 rounded-xl border border-indigo-200 bg-indigo-50 py-3 text-base font-semibold text-indigo-700 shadow-sm transition hover:bg-indigo-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 select-none touch-none;
  }

  .record-btn.is-recording {
    @apply border-transparent bg-red-500 text-white hover:bg-red-600;
    animation: pulse-ring 1.5s cubic-bezier(0.24, 0, 0.38, 1) infinite;
  }

  @keyframes pulse-ring {
    0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
    100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
  }

  .train-body {
    @apply grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(260px,1fr)];
  }

  .training-panel,
  .inference-panel {
    @apply space-y-5 rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm;
  }

  .training-progress {
    @apply flex items-center gap-3;
  }

  .training-progress-bar {
    @apply h-2 flex-1 rounded-full bg-slate-200;
  }

  .training-progress-fill {
    @apply h-full rounded-full bg-indigo-500;
  }

  .training-actions {
    @apply flex flex-wrap gap-3;
  }

  .training-hotkeys {
    @apply flex flex-wrap gap-3 text-xs text-slate-500;
  }

  .training-hotkeys kbd {
    @apply rounded-md border border-slate-300 bg-white px-2 py-0.5 font-semibold;
  }

  .training-meta {
    @apply rounded-2xl bg-slate-50 p-4 text-sm text-slate-600;
  }

  .training-summary {
    @apply rounded-3xl border border-slate-100 bg-slate-50 p-6 shadow-inner space-y-3;
  }

  .training-issues ul {
    @apply mt-2 space-y-2 text-sm text-slate-600;
  }

  .training-issues--background {
    @apply border border-amber-200 bg-amber-50 text-amber-900 rounded-2xl p-4;
  }

  .training-issues--background ul {
    @apply text-amber-900;
  }

  .infer-body {
    @apply space-y-6;
  }

  .inference-status,
  .prediction-status,
  .edge-status,
  .edge-streaming-hint {
    @apply text-sm text-slate-600;
  }

  .inference-video {
    @apply relative aspect-[4/3] w-full max-w-3xl mx-auto overflow-hidden rounded-3xl border border-slate-200 bg-slate-900;
  }

  .inference-video video {
    @apply block h-full w-full object-cover opacity-70 transition;
  }

  .inference-video video.is-mirrored {
    transform: scaleX(-1);
  }

  .inference-video video.is-active {
    @apply opacity-100;
  }

  .gesture-overlay.is-mirrored,
  .face-overlay.is-mirrored {
    transform: scaleX(-1);
  }

  .inference-actions {
    @apply flex flex-wrap gap-3;
  }

  .prediction-output {
    @apply rounded-2xl border border-slate-100 bg-slate-50 p-4;
  }

  .prediction-output ul {
    @apply mt-3 space-y-2;
  }

  .prediction-output li {
    @apply flex items-center justify-between rounded-xl bg-white px-3 py-2 text-sm text-slate-700;
  }

  .prediction-output li.is-active {
    @apply border border-indigo-200 bg-indigo-50 text-indigo-900;
  }

  .edge-panel {
    @apply rounded-2xl border border-slate-200 bg-slate-50 p-4 space-y-3;
  }

  .edge-inline-controls {
    @apply flex flex-wrap items-center gap-3;
  }

  .stream-toggle {
    @apply inline-flex items-center gap-2 text-sm text-slate-700;
  }

  .edge-error {
    @apply text-sm text-red-600;
  }

  .ble-modal-backdrop {
    @apply fixed inset-0 z-40 bg-slate-900/60;
  }

  .ble-modal {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
  }

  .ble-modal-shell {
    @apply w-full max-w-3xl rounded-3xl border border-slate-200 bg-white p-6 shadow-2xl;
  }

  .ble-modal-header {
    @apply mb-4 flex items-center justify-between;
  }

  .icon-close {
    @apply h-8 w-8 rounded-full bg-slate-100 text-2xl leading-none text-slate-600 transition hover:bg-slate-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500;
  }

  .ble-device-list {
    @apply grid gap-4 md:grid-cols-2;
  }

  .ble-device {
    @apply flex h-full w-full flex-col gap-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-left transition hover:border-indigo-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500;
  }

  .ble-device.is-connected {
    @apply border-indigo-300 bg-indigo-50;
  }

  .ble-device-info {
    @apply flex items-center justify-between text-sm font-semibold text-slate-800;
  }

  .ble-device-instructions {
    @apply text-sm text-slate-600;
  }

  .ble-device-instructions ul {
    @apply list-disc pl-4 text-xs text-slate-500;
  }

  .ble-modal-error {
    @apply mb-3 rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700;
  }

  .stream-toggle input {
    @apply h-4 w-4 rounded border-slate-300 text-indigo-600;
  }

  .confirm-backdrop {
    @apply fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/60 p-4;
  }

  .confirm-dialog {
    @apply w-full max-w-md rounded-3xl border border-slate-200 bg-white p-6 shadow-2xl;
  }

  .confirm-dialog.is-destructive {
    @apply border-red-200;
  }

  .confirm-actions {
    @apply mt-6 flex justify-end gap-3;
  }

  .toast-root {
    @apply pointer-events-none fixed inset-0 z-50 flex items-start justify-center p-4;
  }

  .toast-center {
    @apply flex w-full max-w-sm flex-col gap-3;
  }

  .toast {
    @apply pointer-events-auto rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-800 shadow-xl;
  }

  .toast--warning {
    @apply border-amber-200 bg-amber-50 text-amber-900;
  }

  .toast--error {
    @apply border-red-200 bg-red-50 text-red-800;
  }

  .toast-close {
    @apply ml-auto text-lg text-slate-500 transition hover:text-slate-800;
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .device-switch-btn {
    @apply absolute top-3 right-3 z-20 flex h-8 w-8 items-center justify-center rounded-full bg-black/50 text-white backdrop-blur transition hover:bg-black/70 focus:outline-none focus:ring-2 focus:ring-white/50;
  }

  /* Notification Tray */
  .notification-tray {
    @apply fixed bottom-6 right-6 z-[100] flex flex-col items-end gap-4;
  }

  .notification-stack {
    @apply flex flex-col gap-3 transition-all duration-300 origin-bottom;
    @apply opacity-0 translate-y-4 pointer-events-none scale-95;
    max-height: 0;
  }

  .notification-stack.is-open {
    @apply opacity-100 translate-y-0 pointer-events-auto scale-100;
    max-height: 80vh;
    overflow-y: auto;
    padding-bottom: 4px;
  }

  .notification-item {
    @apply relative flex w-80 flex-col gap-1 rounded-xl border bg-white p-4 shadow-lg transition;
  }

  .notification-item.tone-error {
    @apply border-red-200 bg-red-50 text-red-900;
  }
  .notification-item.tone-warning {
    @apply border-amber-200 bg-amber-50 text-amber-900;
  }
  .notification-item.tone-info {
    @apply border-sky-200 bg-sky-50 text-sky-900;
  }

  .notification-close {
    @apply absolute top-2 right-2 flex h-6 w-6 items-center justify-center rounded-full text-lg leading-none opacity-60 hover:bg-black/5 hover:opacity-100;
  }

  .notification-toggle {
    @apply relative flex h-14 w-14 items-center justify-center rounded-full bg-slate-900 text-xl font-bold text-white shadow-xl transition hover:bg-slate-800 active:scale-95;
  }

  .notification-toggle.is-active {
    @apply bg-slate-700;
  }

  .notification-badge {
    @apply absolute -top-1 -right-1 flex h-6 min-w-[1.5rem] items-center justify-center rounded-full bg-red-500 px-1.5 text-xs font-bold text-white shadow-sm ring-2 ring-white;
  }

  .countdown-overlay {
    @apply absolute inset-0 z-10 flex items-center justify-center bg-black/40 text-6xl font-bold text-white backdrop-blur-sm;
  }
}

/* Animations from Prototype */
@keyframes logo-spin-in {
  0% { opacity: 0; transform: scale(0.6) rotate(-180deg); }
  60% { opacity: 1; transform: scale(1.06) rotate(400deg); }
  100% { opacity: 1; transform: scale(1) rotate(360deg); }
}

.identity-logo-spin {
  animation: logo-spin-in 0.5s ease-out 0.05s forwards;
  opacity: 0; /* Start hidden for animation */
}

@media (prefers-reduced-motion: reduce) {
  .identity-logo-spin {
    animation: none;
    opacity: 1;
    transform: none;
  }
}